Checkout API

PayHere Checkout API lets you integrate PayHere with your website, web application or any other application in code level. It offers a simple HTML Form based POST API to initiate a payment request and redirect your customer to PayHere Payment Gateway to securely process the payment. Once the payment is processed it notifies your given URL (notify_url) about the payment status by a server callback with a checksum to verify the response params. You can use those response params & checksum to verify and update your system, based on the payment status.

Prerequisites

You need the following things ready to integrate your website with PayHere Checkout API.

    Merchant ID
        You can find your Merchant ID from Side Menu > Integrations of your PayHere Account.
    Merchant Secret
        You can generate a Merchant Secret for your domain/app by following below steps.
            Go to Side Menu > Integrations section of your PayHere Account
            Click 'Add Domain/App' > Enter your top level domain or App package name > Click 'Request to Allow'
            Wait for the approval for your domain/app (This will take up to 24 hours)
            Copy the Merchant Secret shown in front of your domain/app

Attention: Please note that Merchant ID is unique to your PayHere account, but Merchant Secret is specific to your integrating domain/app. Therefore, you need to add your new domains/apps & get a new Merchant Secret every time you're integrating PayHere on a new domain/app.

Integration

You need to complete the following 3 steps in order to fully integrate your website with PayHere Checkout API.

1. Redirecting Customer to PayHere Payment Gateway

You can a simple HTML Form to submit the below POST params to PayHere Payment Gateway. When the form is submitted, your customer will be securely redirected to the PayHere Payment Gateway & the customer can then enter the credentials (Card No/CVV) & securely process the payment there.
Action URL

Live    - https://www.payhere.lk/pay/checkout
Sandbox - https://sandbox.payhere.lk/pay/checkout


Required POST Parameters

    merchant_id - PayHere Merchant ID
    return_url - URL to redirect users when payment is approved
    cancel_url - URL to redirect users when user cancel the payment
    notify_url - URL to callback the status of the payment (Needs to be a URL accessible on a public IP/domain)
    first_name - Customer’s First Name
    last_name - Customer’s Last Name
    email - Customer’s Email
    phone - Customer’s Phone No
    address - Customer’s Address Line1 + Line2
    city - Customer’s City
    country - Customer’s Country
    order_id - Order ID generated by the merchant
    items - Item title or Order/Invoice number
    currency - Currency Code (LKR/USD)
    amount - Total Payment Amount
    hash - Generated hash value as mentioned below (*Required from 2023-01-16)

Generating 'hash' Value

You can generate the hash value using the merchant_id, order_id, amount, currency and the merchant_secret.

hash = to_upper_case(md5(merchant_id + order_id + amount + currency + to_upper_case(md5(merchant_secret))))

PHP Code sample for generating hash value:

$hash = strtoupper(
    md5(
        $merchant_id .
        $order_id .
        number_format($amount, 2, '.', '') .
        $currency .
        strtoupper(md5($merchant_secret))
    )
);

JavaScript Code sample for generating hash value:

npm install crypto-js
import md5 from 'crypto-js/md5';

let merchantSecret  = 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxx';
let merchantId      = '2xxxxx';
let orderId         = '12345';
let amount          = 1000;
let hashedSecret    = md5(merchantSecret).toString().toUpperCase();
let amountFormated  = parseFloat( amount ).toLocaleString( 'en-us', { minimumFractionDigits : 2 } ).replaceAll(',', '');
let currency        = 'LKR';
let hash            = md5(merchantId + orderId + amountFormated + currency + hashedSecret).toString().toUpperCase();

.NET Code sample for generating hash value:

public class Program
{
    public static void Main()
    {
        string merchantId     = "2xxxxx";
        string merchantSecret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        string orderId              = "12345";
        double amount               = 1000;
        string hashedSecret = ComputeMD5(merchantSecret);
        string amountFormated       = amount.ToString("####0.00");
        string currency             = "LKR";
        string hash                 = ComputeMD5(merchantId + orderId + amountFormated + currency + hashedSecret);
        Console.WriteLine(hash);
    }
    static string ComputeMD5(string s)
    {
        StringBuilder sb = new StringBuilder();
        using (MD5 md5 = MD5.Create())
        {
            byte[] hashValue = md5.ComputeHash(Encoding.UTF8.GetBytes(s));
            foreach (byte b in hashValue)
            {
                sb.Append($"{b:X2}");
            }
        }
        return sb.ToString();
    }
}

Java Code sample for generating hash value:

import java.math.BigInteger;
import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.text.DecimalFormat;

public static void main(String[] args) {
        String merahantID     = "2xxxxx";
        String merchantSecret = "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx";
        String orderID        = "12345";
        double amount         = 1000;
        String currency       = "LKR";
        DecimalFormat df       = new DecimalFormat("0.00");
        String amountFormatted = df.format(amount);
        String hash    = getMd5(merahantID + orderID + amountFormatted + currency + getMd5(merchantSecret));
        System.out.println("Generated Hash: " + hash);
    }

public static String getMd5(String input) {
    try {
        MessageDigest md = MessageDigest.getInstance("MD5");
        byte[] messageDigest = md.digest(input.getBytes());
        BigInteger no = new BigInteger(1, messageDigest);
        String hashtext = no.toString(16);
        while (hashtext.length() < 32) {
            hashtext = "0" + hashtext;
        }
        return hashtext.toUpperCase();
    }
    catch (NoSuchAlgorithmException e) {
        throw new RuntimeException(e);
    }
}

Attention: Please note that the hash parameter should not be generated in client-side since it will expose your merchant_secret.

Optional POST Parameters

    delivery_address - Delivery Address Line1 + Line2
    delivery_city - Delivery City
    delivery_country - Delivery Country
    item_name_1 - Name of Item 1
    item_number_1 - Model number of Item 1
    amount_1 - Unit amount of Item 1
    quantity_1 - Quantity of Item 1
    item_name_2 - Name of Item 2
    item_number_2 - Model number of Item 2
    amount_2 - Unit amount of Item 2
    quantity_2 - Quantity of Item 2
    (You can list rest of the items also like this)
    platform - Referring Platform
    custom_1 - Custom param 1 set by merchant
    custom_2 - Custom param 2 set by merchant


HTML Form Code Sample

<html>
<body>
<form method="post" action="https://sandbox.payhere.lk/pay/checkout">
    <input type="hidden" name="merchant_id" value="121XXXX">    <!-- Replace your Merchant ID -->
    <input type="hidden" name="return_url" value="http://sample.com/return">
    <input type="hidden" name="cancel_url" value="http://sample.com/cancel">
    <input type="hidden" name="notify_url" value="http://sample.com/notify">
    </br></br>Item Details</br>
    <input type="text" name="order_id" value="ItemNo12345">
    <input type="text" name="items" value="Door bell wireless">
    <input type="text" name="currency" value="LKR">
    <input type="text" name="amount" value="1000">
    </br></br>Customer Details</br>
    <input type="text" name="first_name" value="Saman">
    <input type="text" name="last_name" value="Perera">
    <input type="text" name="email" value="samanp@gmail.com">
    <input type="text" name="phone" value="0771234567">
    <input type="text" name="address" value="No.1, Galle Road">
    <input type="text" name="city" value="Colombo">
    <input type="hidden" name="country" value="Sri Lanka">
    <input type="hidden" name="hash" value="098F6BCD4621D373CADE4E832627B4F6">    <!-- Replace with generated hash -->
    <input type="submit" value="Buy Now">
</form>
</body>
</html>


2. Listening to Payment Notification

As soon as the payment is processed, PayHere notifies the payment status to the notify_url you posted to the Checkout API as a server callback & redirects the customer back to your website to the return_url. Payment notification will contain the following data as POST params, so you need to host a script on your notify_url to fetch the following POST params & update your database accordingly.

POST params

    merchant_id - PayHere Merchant ID of the merchant
    order_id - Order ID sent by Merchant to Checkout page
    payment_id - Unique Payment ID generated by PayHere for the processed payment
    payhere_amount - Total Amount of the payment
    payhere_currency - Currency code of the payment (LKR/USD/GBP/EUR/AUD)
    status_code - Payment status code (2, 0, -1, -2, -3)
    md5sig - Encrypted signature to verify the payment
    custom_1 - Custom param 1 sent by merchant to Checkout page
    custom_2 - Custom param 2 sent by merchant to Checkout page
    method - Payment method selected by the customer. (VISA, MASTER, AMEX, EZCASH, MCASH, GENIE, VISHWA, PAYAPP, HNB, FRIMI)
    status_message - Message received from payment gateway which the customer tried to pay

If the customer made the payment by VISA or MASTER credit/debit card, following parameters will also be available.

    card_holder_name - Card Holder Name
    card_no - Masked card number (Ex: ************4564)
    card_expiry - Card expiry in format MMYY (Ex: 0122)

Payment Status Codes

    2 - success
    0 - pending
    -1 - canceled
    -2 - failed
    -3 - chargedback

Attention:

    You cannot test the payment notification by print/echo methods since notify_url never loads to the browser as it's a server callback. You can only test it by updating your database upon fetching the notification.
    You cannot test the payment notification on localhost. You need to submit a publically accessible IP or domain based URL as your notify_url for PayHere to directly notify your server.
    No payment status parameters are passed to the return_url when redirecting the customer back to your website. You need to update your database upon fetching payment status by your script on notify_url & then show the payment status to your customer in the page on return_url by fetching the status from your database.
    The request parameters are encoded in the 'application/x-www-form-urlencoded' format, not 'application/json'.


3. Verifying the Payment Status

It is critical to verify the Payment Notification before taking any actions on the payment response. You can do the verification using the md5sig checksum parameter that is generated & sent by PayHere along with the payment status params according to following logic.

md5sig = strtoupper(
    md5 (
        merchant_id +
        order_id +
        payhere_amount +
        payhere_currency +
        status_code +
        strtoupper(md5(merchant_secret))
    )
)

Once you receive the payment status parameters from PayHere, you can locally generate this checksum using the merchant_id, order_id, payhere_amount, payhere_currency & status_code sent by the payment notification and the merchant_secret you have locally. Your locally generated checksum should be equal to the md5sig sent by PayHere if the payment notification is valid.

Code Sample (PHP)

You can host this script at your notify_url.

<?php

$merchant_id         = $_POST['merchant_id'];
$order_id            = $_POST['order_id'];
$payhere_amount      = $_POST['payhere_amount'];
$payhere_currency    = $_POST['payhere_currency'];
$status_code         = $_POST['status_code'];
$md5sig              = $_POST['md5sig'];

$merchant_secret = 'XXXXXXXXXXXXX'; // Replace with your Merchant Secret

$local_md5sig = strtoupper(
    md5(
        $merchant_id .
        $order_id .
        $payhere_amount .
        $payhere_currency .
        $status_code .
        strtoupper(md5($merchant_secret))
    )
);

if (($local_md5sig === $md5sig) AND ($status_code == 2) ){
        //TODO: Update your database as payment success
}

?>

Attention:

    Please make sure to consider the payment as successful only after the verfification, as it ensures that the payment notification received to your notify_url was genuinely initiated by PayHere, not by any other party.
    If you do not implement this payment verification properly, there's a security risk of a third party sending a manipulated payment notification to your notify_url, falsly notifing that the payment is successful.

JavaScript SDK

PayHere Javascript SDK (payhere.js) lets you integrate PayHere into your Website, Web App or cross-platform Mobile App from front-end level to offer an Onsite Checkout Experience for consumers, which avoids redirecting the consumers out of your website or app.

You just have to include payhere.js JavaScript library in your web page & initiate a payment instance by passing parameters into the methods provided by the library. The payment callback is same as the Checkout API & it can be handled from backend.

Please refer the below steps to achieve PayHere Onsite Checkout Experience.

Prerequisites

You need the following things ready to integrate your website with PayHere JavaScript SDK.

    Merchant ID
        You can find your Merchant ID from Side Menu > Integrations of your PayHere Account.
    Merchant Secret
        You can generate a Merchant Secret for your domain/app by following below steps.
            Go to Side Menu > Integrations section of your PayHere Account
            Click 'Add Domain/App' > Enter your top level domain or App package name > Click 'Request to Allow'
            Wait for the approval for your domain/app (This will take up to 24 hours)
            Copy the Merchant Secret shown in front of your domain/app

Attention: Please note that Merchant ID is unique to your PayHere account, but Merchant Secret is specific to your integrating domain/app. Therefore, you need to add your new domains/apps & get a new Merchant Secret every time you're integrating PayHere on a new domain/app.

Integration

You need to complete the following 3 steps in order to fully integrate your website with PayHere JavaScript SDK.

1. Showing the Payment Popup

Regardless of whether you are using vanilla Javascript or a Framework, you can simply set the below variables and show the PayHere Payment Gateway page as a popup. When the popup is displayed, your customer can enter the credentials (Card No/CVV) there. The payment will be securely processed by PayHere within an iframe.

payhere.js Script

<script type="text/javascript" src="https://www.payhere.lk/lib/payhere.js"></script>


Required Parameters

    merchant_id - PayHere Merchant ID
    return_url - URL to redirect users when success
    cancel_url - URL to redirect users when cancelled
    notify_url - URL to callback the status of the payment (Needs to be a URL accessible on a public IP/domain)
    first_name - Customer’s First Name
    last_name - Customer’s Last Name
    email - Customer’s Email
    phone - Customer’s Phone No
    address - Customer’s Address Line1 + Line2
    city - Customer’s City
    country - Customer’s Country
    order_id - Order ID generated by the merchant
    items - Item title or Order/Invoice number
    currency - Currency Code (LKR/USD)
    amount - Total Payment Amount
    hash - Generated hash value as mentioned below (*Required from 2023-01-16)

Generating 'hash' Value

You can generate the hash value using the merchant_id, order_id, amount, currency and the merchant_secret.

hash = to_upper_case(md5(merchant_id + order_id + amount + currency + to_upper_case(md5(merchant_secret))))

PHP Code sample for generating hash value:

$hash = strtoupper(
    md5(
        $merchant_id .
        $order_id .
        number_format($amount, 2, '.', '') .
        $currency .
        strtoupper(md5($merchant_secret))
    )
);

Attention: Please note that the hash parameter should not be generated in client-side since it will expose your merchant_secret. Generate it from your server-side & retrieve it to the client-side.

Optional Parameters

    delivery_address - Delivery Address Line1 + Line2
    delivery_city - Delivery City
    delivery_country - Delivery Country
    item_name_1 - Name of Item 1
    item_number_1 - Model number of Item 1
    amount_1 - Unit amount of Item 1
    quantity_1 - Quantity of Item 1
    item_name_2 - Name of Item 2
    item_number_2 - Model number of Item 2
    amount_2 - Unit amount of Item 2
    quantity_2 - Quantity of Item 2
    (You can list rest of the items also like this)
    platform - Referring Platform
    custom_1 - Custom param 1 set by merchant
    custom_2 - Custom param 2 set by merchant

Event Handling

    payhere.onCompleted - Called when the checkout is completed. However, the payment can be successful or failed.
    payhere.onDismissed - Called when the user closes the payment dialog before the payment can be processed.
    payhere.onError - Called if the parameters passed in are invalid.


Code Sample

<script type="text/javascript" src="https://www.payhere.lk/lib/payhere.js"></script>
<button type="submit" id="payhere-payment" >PayHere Pay</button>
<script>
    // Payment completed. It can be a successful failure.
    payhere.onCompleted = function onCompleted(orderId) {
        console.log("Payment completed. OrderID:" + orderId);
        // Note: validate the payment and show success or failure page to the customer
    };

    // Payment window closed
    payhere.onDismissed = function onDismissed() {
        // Note: Prompt user to pay again or show an error page
        console.log("Payment dismissed");
    };

    // Error occurred
    payhere.onError = function onError(error) {
        // Note: show an error page
        console.log("Error:"  + error);
    };

    // Put the payment variables here
    var payment = {
        "sandbox": true,
        "merchant_id": "121XXXX",    // Replace your Merchant ID
        "return_url": undefined,     // Important
        "cancel_url": undefined,     // Important
        "notify_url": "http://sample.com/notify",
        "order_id": "ItemNo12345",
        "items": "Door bell wireles",
        "amount": "1000.00",
        "currency": "LKR",
        "hash": "45D3CBA93E9F2189BD630ADFE19AA6DC", // *Replace with generated hash retrieved from backend
        "first_name": "Saman",
        "last_name": "Perera",
        "email": "samanp@gmail.com",
        "phone": "0771234567",
        "address": "No.1, Galle Road",
        "city": "Colombo",
        "country": "Sri Lanka",
        "delivery_address": "No. 46, Galle road, Kalutara South",
        "delivery_city": "Kalutara",
        "delivery_country": "Sri Lanka",
        "custom_1": "",
        "custom_2": ""
    };

    // Show the payhere.js popup, when "PayHere Pay" is clicked
    document.getElementById('payhere-payment').onclick = function (e) {
        payhere.startPayment(payment);
    };
</script>


2. Listening to Payment Notification

As soon as the payment is processed, PayHere notifies the payment status to the notify_url you posted to the Checkout API as a server callback & redirects the customer back to your website to the return_url. Payment notification will contain the following data as POST params, so you need to host a script on your notify_url to fetch the following POST params & update your database accordingly.
POST params

    merchant_id - PayHere Merchant ID of the merchant
    order_id - Order ID sent by Merchant to Checkout page
    payment_id - Unique Payment ID generated by PayHere for the processed payment
    payhere_amount - Total Amount of the payment
    payhere_currency - Currency code of the payment (LKR/USD/GBP/EUR/AUD)
    status_code - Payment status code (2, 0, -1, -2, -3)
    md5sig - Encrypted signature to verify the payment
    custom_1 - Custom param 1 sent by merchant to Checkout page
    custom_2 - Custom param 2 sent by merchant to Checkout page
    method - Payment method selected by the customer. (VISA, MASTER, AMEX, EZCASH, MCASH, GENIE, VISHWA, PAYAPP, HNB, FRIMI)
    status_message - Message received from payment gateway which the customer tried to pay

    If the customer made the payment by `VISA` or `MASTER` credit/debit card, following parameters will also be available.
    card_holder_name - Card Holder Name
    card_no - Masked card number (Ex: ************4564)
    card_expiry - Card expiry in format MMYY (Ex: 0122)

Payment Status Codes

    2 - success
    0 - pending
    -1 - canceled
    -2 - failed
    -3 - chargedback

Attention:

    The request parameters are encoded in the 'application/x-www-form-urlencoded' format, not 'application/json'.
    You cannot test the payment notification by print/echo methods since notify_url never loads to the browser as it's a server callback. You can only test it by updating your database upon fetching the notification.
    You cannot test the payment notification on localhost. You need to submit a publically accessible IP or domain based URL as your notify_url for PayHere to directly notify your server.
    No payment status parameters are passed to the return_url when redirecting the customer back to your website. You need to update your database upon fetching payment status by your script on notify_url & then show the payment status to your customer in the page on return_url by fetching the status from your database.
    The request parameters are encoded in the 'application/x-www-form-urlencoded' format, not 'application/json'.


3. Verifying the Payment Status

It is critical to verify the Payment Notification before taking any actions on the payment response. You can do the verification using the md5sig checksum parameter that is generated & sent by PayHere along with the payment status parameters according to following logic.

md5sig = strtoupper(
    md5 (
        merchant_id +
        order_id +
        payhere_amount +
        payhere_currency +
        status_code +
        strtoupper(md5(merchant_secret))
    )
)

Once you receive the payment status params from PayHere, you can locally generate this checksum using the merchant_id, order_id, payhere_amount, payhere_currency & status_code sent by the payment notification and the merchant_secret you have locally. Your locally generated checksum should equals to the md5sig sent by PayHere if the payment notification is valid.

Code Sample (PHP)

You can host this script at your notify_url.

<?php

$merchant_id         = $_POST['merchant_id'];
$order_id            = $_POST['order_id'];
$payhere_amount      = $_POST['payhere_amount'];
$payhere_currency    = $_POST['payhere_currency'];
$status_code         = $_POST['status_code'];
$md5sig              = $_POST['md5sig'];

$merchant_secret = 'XXXXXXXXXXXXX'; // Replace with your Merchant Secret

$local_md5sig = strtoupper(
    md5(
        $merchant_id .
        $order_id .
        $payhere_amount .
        $payhere_currency .
        $status_code .
        strtoupper(md5($merchant_secret))
    )
);

if (($local_md5sig === $md5sig) AND ($status_code == 2) ){
        //TODO: Update your database as payment success
}

?>

Attention:

    Please make sure to consider the payment as successful only after the verfification, as it ensures that the payment notification received to your notify_url was genuinely initiated by PayHere, not by any other party.
    If you do not implement this payment verification properly, there's a security risk of a third party sending a manipulated payment notification to your notify_url, falsly notifing that the payment is successful.

Retrieval API

PayHere Retrieval API lets you retrieve the details of the Successful payments processed through your PayHere account. The details include the Payment status (Received/Refunded/Chargebacked), Customer information, Amount details including exchange rate & fees, Payment method (Visa/Mastercard/Amex/etc) & masked card number of your payee.

Retrieval API is a RESTful API where you can send a HTTP GET Request to an API end point & retrieve the payment details as the response. The API is secured with OAuth authentication & you need first generate a pair of App ID & App Secret from your PayHere account, derive an Authorization code from them & retrieve an Access Token from the Authorization code in order to consume the Retrieval API.

Please follow the below steps.

1. Create an API Key

    Sign in to your PayHere account & go to Settings > API Keys section
    Click 'Create API Key' button & enter an app name & comma seperated domains to whilelist
    Tick the permission 'Automated Charging API'
    Click 'Save API Key' button to create the app
    Once the app is created click 'View Credentials' button in front of the created record
    Copy the 'App ID' & 'App Secret' values


2. Generate an Authorization code

    Go to a Base64 encoding site such as https://www.base64encode.net/
    Paste the App ID & App Secret you copied from Step 1 above, separated by a colon (:) mark. eg. 4OVx33RVOPg4DzdZUzq4A94D2:8n4VCj25MXp4JLDFyvsE9h4a8qgbPaZUI4JEWK4FCvop
    Click 'Encode' button & copy the base64 encoded value. This is your Authorization code.


3. Retrieve an Access Token

If you don't already have a valid Access Token, you can retrieve one by consuming following API end point.
Request URL

Sandbox - https://sandbox.payhere.lk/merchant/v1/oauth/token
Live    - https://www.payhere.lk/merchant/v1/oauth/token

Header

Authorization: Basic <Authorization_code>

eg. Authorization: Basic NE9WeDMzUlZPUGc0RHpkWlV6cTRBOTREMjo4bjRWQ2oyNU1YcDRKTERGeXZzRTloNGE4cWdiUGFaVUk0SkVXSzRGQ3ZvcA==
Body

grant_type: client_credentials

The response for the above request will looks like following.
Response

{
    "access_token": "cb5c47fd-741c-489a-b69e-fd73155ca34e",
    "token_type": "bearer",
    "expires_in": 599,
    "scope": "SANDBOX"
}

Retrieve the access_token from the above response.

4. Retrieve Payment details

Consume the Retrieval API with a valid access_token to retrieve details of a particular payment. Use the order_id you passed to the Checkout API or Charging API.

(Please note that in Live environment, this API can be consumed only from the allowed domains you white-listed when creating the Business App in Step 1. If you want to consume this from a Mobile App, write an intermediate API on your domain to initiate the retrieval request & integrate it with your Mobile App instead of integrating directly with the Retrieval API.)
Request URL

Sandbox - https://sandbox.payhere.lk/merchant/v1/payment/search?order_id=LP8006126139
Live    - https://www.payhere.lk/merchant/v1/payment/search?order_id=LP8006126139

Header

Authorization: Bearer <access_token>
Content-Type: application/json

eg. Authorization: Bearer cb5c47fd-741c-489a-b69e-fd73155ca34e
GET Parameters

order_id - The order_id you passed to the Checkout API when processing the payment

Response

The response for the above request will look like following.

{
    "status": 1,
    "msg": "Payments with order_id:LP8006126139_2019-12-06",
    "data": [
        {
            "payment_id": 320025071278,
            "order_id": "LP8006126139",
            "date": "2020-01-16 16:21:02",
            "description": "Policy No. LP8006126139 - Outstanding Payment",
            "status": "RECEIVED",
            "currency": "LKR",
            "amount": 50,
            "customer": {
                "fist_name": "Saman",
                "last_name": "Perera",
                "email": "samanperera@gmail.com",
                "phone": "+94771234567",
                "delivery_details": {
                    "address": "N0.1, Galle Road",
                    "city": "Colombo",
                    "country": "Sri Lanka"
                }
            },
            "amount_detail": {
                "currency": "LKR",
                "gross": 500,
                "fee": 14.50,
                "net": 485.50,
                "exchange_rate": 1,
                "exchange_from": "LKR",
                "exchange_to": "LKR"
            },
            "payment_method": {
                "method": "VISA",
                "card_customer_name": "S Perera",
                "card_no": "************1234"
            },
            "items": null
        }
    ]
}

The status of the above response reflects whether the request processed without errors or not.

Payment status codes:

    0 - Payment pending
    1 - Payment successful
    -1 - No records found
    -2 - Payment declined

PayHere does not validate the uniqueness of the Order ID set by the merchant. In that case, there might be one or more successful payments that will return from the API. The payment status under data[*].status will have the following codes

    RECEIVED - Payment successfully received
    REFUND REQUESTED - A refund request was received for the payment and waiting for the amount to be transferred from the merchant account
    REFUND PROCESSING - Refund amount successfully transferred from the merchant and waiting for PayHere to process the refund
    REFUNDED - Refund completed
    CHARGEBACKED - Payment chargebacked


Attention:

    You need to follow Steps 1 & 2 only one time to generate an Authorization code for your app
    You need to follow Step 3 & retrieve a new Access Token only if your current Access Token is expired
    If you already have a valid Access Token, you can retieve payment details using the same Access Token by following just the Step 4


5. Error Handling

Error messages may returned for above API end point due to the following reasons. You need to identify & handle them properly in your application.

Invalid Access Token

{
    "error": "invalid_token",
    "error_description": "Invalid access token: e291493a-99a5-4177-9c8b-e8cd18ee9f85"
}

Access Token Expired

{
    "error": "invalid_token",
    "error_description": "Access token expired: cb5c47fd-741c-489a-b69e-fd73155ca34e"
}

Invalid Order ID or Order ID which does not have successful payment(s)

{
    "status": -1,
    "msg": "No payments found",
    "data": null
}

Invalid API Authorization (eg. Consuming through a not allowed domain, ect.)

{
    "status": -2,
    "msg": "Authentication error",
    "data": null
}
